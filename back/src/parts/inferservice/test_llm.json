{
    "graph": {
        "nodes": [
            {
                "id": "__start__",
                "type": "custom",
                "data": {
                    "type": "start",
                    "title": "开始",
                    "desc": "",
                    "payload__kind": "__start__",
                    "variables": [],
                    "config__input_ports": [],
                    "config__output_shape": [],
                    "config__output_ports": [
                        {
                            "id": "source"
                        }
                    ],
                    "config__parameters": [
                        {
                            "name": "config__output_shape",
                            "type": "config__output_shape",
                            "label": "参数",
                            "tooltip": "定义工作流需要的输入参数，可以选择多种格式"
                        }
                    ],
                    "selected": false
                },
                "position": {
                    "x": 80,
                    "y": 282
                },
                "targetPosition": "left",
                "sourcePosition": "right",
                "positionAbsolute": {
                    "x": 80,
                    "y": 282
                },
                "width": 195,
                "height": 56
            },
            {
                "id": "__end__",
                "type": "custom",
                "data": {
                    "type": "end",
                    "title": "结束",
                    "desc": "",
                    "payload__kind": "__end__",
                    "outputs": [],
                    "config__input_ports": [
                        {
                            "id": "target",
                            "param_source_shape": []
                        }
                    ],
                    "config__output_ports": [],
                    "config__input_shape": [],
                    "config__parameters": [
                        {
                            "name": "config__input_shape",
                            "type": "config__input_shape",
                            "label": "参数"
                        },
                        {
                            "name": "config__input_ports",
                            "type": "config__input_ports",
                            "label": "输入端点",
                            "tooltip": "输入参数的数量，需保证与输入参数数量保持一致"
                        }
                    ],
                    "selected": false
                },
                "position": {
                    "x": 850,
                    "y": 282
                },
                "targetPosition": "left",
                "sourcePosition": "right",
                "positionAbsolute": {
                    "x": 850,
                    "y": 282
                },
                "width": 195,
                "height": 60
            },
            {
                "id": "1750059857089",
                "type": "custom",
                "data": {
                    "type": "universe",
                    "title": "大模型-1",
                    "desc": "调用大模型，使用变量和提示词生成回复",
                    "config__input_ports": [
                        {
                            "id": "target",
                            "param_source_shape": [],
                            "param_input_error": []
                        }
                    ],
                    "config__output_ports": [
                        {
                            "id": "source"
                        }
                    ],
                    "config__parameters": [
                        {
                            "name": "config__input_shape",
                            "type": "config__input_shape",
                            "label": "输入参数",
                            "effects": "",
                            "min": 1,
                            "max": 10,
                            "tooltip": "输入需要添加到提示词的信息，这些信息可以被下方的提示词引用",
                            "configurable": true
                        },
                        {
                            "name": "config__output_shape",
                            "type": "config__output_shape",
                            "label": "输出参数",
                            "effects": "",
                            "min": 1,
                            "max": 1,
                            "tooltip": "大模型生成的输出内容"
                        },
                        {
                            "name": "config__input_ports",
                            "type": "config__input_ports",
                            "label": "输入端点",
                            "effects": "",
                            "tooltip": "将取期望的字段"
                        },
                        {
                            "label": "模型来源",
                            "name": "payload__model_source",
                            "type": "select",
                            "allowClear": false,
                            "options": [
                                {
                                    "value": "online_model",
                                    "label": "在线模型"
                                },
                                {
                                    "value": "inference_service",
                                    "label": "平台推理服务"
                                }
                            ],
                            "required": true,
                            "defaultValue": "online_model",
                            "watch": [
                                {
                                    "conditions": [
                                        {
                                            "key": "payload__model_source",
                                            "value": [
                                                "online_model",
                                                "inference_service"
                                            ],
                                            "operator": "include"
                                        }
                                    ],
                                    "actions": [
                                        {
                                            "key": "payload__source"
                                        },
                                        {
                                            "key": "payload__base_model_selected_keys"
                                        },
                                        {
                                            "key": "payload__inference_service"
                                        },
                                        {
                                            "key": "payload__inference_service_selected_keys"
                                        },
                                        {
                                            "key": "payload__jobid"
                                        },
                                        {
                                            "key": "payload__token"
                                        },
                                        {
                                            "key": "payload__stream",
                                            "value": true
                                        },
                                        {
                                            "key": "payload__prompt"
                                        },
                                        {
                                            "key": "payload__prompt_template"
                                        },
                                        {
                                            "key": "payload__use_history",
                                            "value": false
                                        }
                                    ],
                                    "children": [
                                        {
                                            "conditions": [
                                                {
                                                    "key": "payload__model_source",
                                                    "value": "online_model"
                                                }
                                            ],
                                            "actions": [
                                                {
                                                    "key": "config__parameters",
                                                    "extend": true,
                                                    "value": [
                                                        {},
                                                        {},
                                                        {},
                                                        {},
                                                        {
                                                            "label": "",
                                                            "type": "online_model_select",
                                                            "_check_names": [
                                                                "payload__source",
                                                                "payload__base_model_selected_keys"
                                                            ],
                                                            "required": true
                                                        },
                                                        {},
                                                        {},
                                                        {}
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "conditions": [
                                                {
                                                    "key": "payload__model_source",
                                                    "value": "inference_service"
                                                }
                                            ],
                                            "actions": [
                                                {
                                                    "key": "config__parameters",
                                                    "extend": true,
                                                    "value": [
                                                        {},
                                                        {},
                                                        {},
                                                        {},
                                                        {
                                                            "label": "推理服务",
                                                            "name": "payload__inference_service",
                                                            "type": "inference_service_select",
                                                            "required": true,
                                                            "tooltip": "选择推理服务",
                                                            "_check_names": [],
                                                            "itemProps": {
                                                                "model_type": "localLLM"
                                                            }
                                                        },
                                                        {},
                                                        {},
                                                        {}
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "inference_service_select",
                            "_check_names": [],
                            "required": true,
                            "label": "推理服务",
                            "name": "payload__inference_service",
                            "tooltip": "选择推理服务",
                            "itemProps": {
                                "model_type": "localLLM"
                            }
                        },
                        {
                            "name": "payload__prompt",
                            "type": "prompt_editor",
                            "required": false,
                            "defaultValue": [
                                {
                                    "role": "system",
                                    "content": "你是一个专业、智能、有用的AI助手。请根据用户的问题提供准确、有帮助的回答。如果你不知道某个问题的答案，请诚实地说出来，而不要编造信息。你的回答应该是清晰、简洁且结构良好的。"
                                },
                                {
                                    "role": "user",
                                    "content": "我需要你帮我解答关于{query}的问题。请提供详细且准确的信息，如果有需要，可以列出步骤或者相关例子来说明。"
                                }
                            ],
                            "itemProps": {
                                "format": "dict"
                            }
                        },
                        {
                            "label": "示例对话",
                            "name": "payload__example_dialogs",
                            "type": "example_dialog",
                            "required": false,
                            "defaultValue": []
                        },
                        {
                            "label": "流式输出",
                            "name": "payload__stream",
                            "type": "boolean",
                            "required": true,
                            "defaultValue": true,
                            "tooltip": "流式输出模型结果"
                        }
                    ],
                    "config__input_shape": [
                        {
                            "id": "query",
                            "variable_name": "query",
                            "variable_type": "str",
                            "variable_mode": "mode-line",
                            "variable_name_readonly": true,
                            "variable_type_readonly": false,
                            "variable_mode_readonly": false,
                            "variable_type_options": [
                                "str",
                                "dict"
                            ],
                            "configurable": true
                        }
                    ],
                    "config__output_shape": [
                        {
                            "id": "output",
                            "variable_name": "output",
                            "variable_type": "str",
                            "variable_mode": "mode-line",
                            "variable_name_readonly": true,
                            "variable_type_readonly": true,
                            "variable_mode_readonly": false,
                            "variable_type_options": [
                                "str"
                            ],
                            "variable_file_type": "default"
                        }
                    ],
                    "name": "online-llm",
                    "classification": "basic-model",
                    "payload__kind": "OnlineLLM",
                    "title_en": "LLM",
                    "config__can_run_by_single": true,
                    "about": "大模型，可以进行推理",
                    "payload__model_source": "inference_service",
                    "payload__example_dialogs": [],
                    "payload__stream": true,
                    "payload__use_history": false,
                    "selected": true,
                    "payload__inference_service": "http://jintianinfer-0.jintianinfer-internal-svc.aiso.svc.cluster.local/generate",
                    "payload__inference_service_selected_keys": [
                        "parent__12",
                        "http://jintianinfer-0.jintianinfer-internal-svc.aiso.svc.cluster.local/generate"
                    ],
                    "payload__jobid": "http://jintianinfer-0.jintianinfer-internal-svc.aiso.svc.cluster.local/generate",
                    "payload__token": "00000000-0000-0000-0000-000000000001",
                    "payload__base_model": "internlm2_5-7b-chat",
                    "payload__deploy_method": "Mindie",
                    "payload__url": "https://maas.sensecore.dev/generate",
                    "payload__prompt": {
                        "system": "你是一个专业、智能、有用的AI助手。请根据用户的问题提供准确、有帮助的回答。如果你不知道某个问题的答案，请诚实地说出来，而不要编造信息。你的回答应该是清晰、简洁且结构良好的。",
                        "user": "请回答我的问题: {query}"
                    }
                },
                "position": {
                    "x": 524,
                    "y": 224
                },
                "targetPosition": "left",
                "sourcePosition": "right",
                "positionAbsolute": {
                    "x": 524,
                    "y": 224
                },
                "width": 195,
                "height": 92,
                "selected": true
            }
        ],
        "edges": [],
        "resources": [],
        "viewport": {
            "x": 259,
            "y": -10,
            "zoom": 1
        }
    },
    "features": {
        "opening_statement": "",
        "suggested_questions": [],
        "suggested_questions_after_answer": {
            "enabled": false
        },
        "text_to_speech": {
            "enabled": false
        },
        "speech_to_text": {
            "enabled": false
        },
        "retriever_resource": {
            "enabled": false
        },
        "sensitive_word_avoidance": {
            "enabled": false
        },
        "file_upload": {
            "image": {
                "enabled": false,
                "number_limits": 3,
                "transfer_methods": [
                    "local_file",
                    "remote_url"
                ]
            }
        }
    },
    "environment_variables": [],
    "hash": "ebe6d38758be1915bbeb61122abaf1c7ff4316fca15039ef0c92533caef0a956"
}