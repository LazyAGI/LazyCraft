{"id":"f21fc9ca-2b82-4499-bd6c-8c671ac61db5","name":"智绘创作师","description":"输入文本描述，一键生成高质量图像，支持不同风格转换（动漫、写实、油画等），适用于设计与创意表达。","icon":"","icon_background":null,"categories":[],"tags":["灵感提升","图像与音频"],"graph":{"nodes":[{"id":"__start__","type":"custom","data":{"type":"start","title":"开始","desc":"","payload__kind":"__start__","variables":[],"config__input_ports":[],"config__output_shape":[{"id":"a90be6c5-58ba-4acc-b4b1-3fbe8d7422f4","variable_mode":"mode-line","variable_name":"query","variable_type":"str","payload__batch_flag":false},{"id":"756729a7-73c7-4c2b-a39f-edb89b026a33","variable_mode":"mode-line","variable_name":"input","variable_type":"file","variable_file_type":"default"}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__output_shape","type":"config__output_shape","label":"参数","tooltip":"定义工作流需要的输入参数，可以选择多种格式"}],"selected":false},"position":{"x":-298.76242585577575,"y":215.31619968790602},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":-298.76242585577575,"y":215.31619968790602},"width":195,"height":56,"selected":false},{"id":"__end__","type":"custom","data":{"type":"end","title":"结束","desc":"","payload__kind":"__end__","outputs":[],"config__input_ports":[{"id":"target","param_source_shape":[{"id":"output","variable_name":"output","variable_type":"file","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["file"],"variable_file_type":"images","sourceNodeTitle":"智绘创作师"}],"param_check_success":true,"param_input_error":[{"id":"3ff4dc89-0823-4158-9ba8-adb9da509aa2","variable_mode":"mode-line","variable_name":"output","variable_type":"file","payload__batch_flag":false,"variable_file_type":"default","error_type":"file_type_mismatch","source_info":{"node_title":"文生图-1","variable_name":"output","variable_type":"file","variable_file_type":"images"}}],"param_input_success":[{"id":"3ff4dc89-0823-4158-9ba8-adb9da509aa2","variable_mode":"mode-line","variable_name":"output","variable_type":"file","payload__batch_flag":false,"variable_file_type":"default"}]}],"config__output_ports":[],"config__input_shape":[{"id":"3ff4dc89-0823-4158-9ba8-adb9da509aa2","variable_mode":"mode-line","variable_name":"output","variable_type":"file","payload__batch_flag":false,"variable_file_type":"default"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"参数"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","tooltip":"输入参数的数量，需保证与输入参数数量保持一致"}],"selected":false},"position":{"x":1003.925854993669,"y":273.5147182751938},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":1003.925854993669,"y":273.5147182751938},"width":195,"height":56,"selected":false},{"id":"1752130938475","type":"custom","data":{"type":"universe","title":"智绘创作师","desc":"本地的文生图模型，可根据输入生成图片","config__input_ports":[{"id":"target","param_source_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","sourceNodeTitle":"翻译助手"}],"param_check_success":true,"param_input_error":[],"param_input_success":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":"","min":1,"max":1},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","min":1,"max":1},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","tooltip":"将取期望的字段"},{"label":"模型来源","name":"payload__model_source","type":"select","allowClear":false,"options":[{"value":"online_model","label":"在线模型"},{"value":"inference_service","label":"平台推理服务"}],"required":true,"defaultValue":"online_model","watch":[{"conditions":[{"key":"payload__model_source","value":["online_model","inference_service"],"operator":"include"}],"actions":[{"key":"payload__source"},{"key":"payload__base_model_selected_keys"},{"key":"payload__inference_service"},{"key":"payload__inference_service_selected_keys"},{"key":"payload__jobid"},{"key":"payload__token"},{"key":"payload__stream","value":false},{"key":"payload__prompt"},{"key":"payload__prompt_template"},{"key":"payload__use_history","value":false}],"children":[{"conditions":[{"key":"payload__model_source","value":"online_model"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"","type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true,"model_kind":"SD"},{},{},{}]}]},{"conditions":[{"key":"payload__model_source","value":"inference_service"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"推理服务","name":"payload__inference_service","type":"inference_service_select","required":true,"tooltip":"选择推理服务","_check_names":[],"itemProps":{"model_type":"localLLM","model_kind":"SD"}},{},{},{}]}]}]}]},{"type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true,"model_kind":"SD"}],"config__input_shape":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"config__output_shape":[{"id":"output","variable_name":"output","variable_type":"file","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["file"],"variable_file_type":"images"}],"name":"sd","classification":"basic-model","payload__kind":"SD","config__can_run_by_single":true,"title_en":"StableDiffusion","about":"本地的文生图模型（StableDiffusion），可以在本地进行部署和推理","payload__model_source":"online_model","selected":false,"payload__source":"Qwen","payload__base_url":"","payload__source_id":"34","payload__base_model_selected_keys":["wanx2.1-t2i-turbo"],"payload__base_model":"wanx2.1-t2i-turbo","payload__can_finetune":false,"payload__model_id":34,"payload__model_generate_control":{"payload__temperature":0.8,"payload__top_p":0.7,"payload__max_tokens":4096},"payload__base_model_id":8},"position":{"x":867.3191903066141,"y":106.6375110206721},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":867.3191903066141,"y":106.6375110206721},"width":195,"height":92,"selected":true},{"id":"1752649692190","type":"custom","data":{"type":"universe","title":"翻译助手","desc":"调用大模型，使用变量和提示词生成回复","config__input_ports":[{"id":"target","param_source_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","sourceNodeTitle":"query改写"}],"param_check_success":true,"param_input_error":[],"param_input_success":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":"","min":1,"max":10,"tooltip":"输入需要添加到提示词的信息，这些信息可以被下方的提示词引用","configurable":true},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","min":1,"max":1,"tooltip":"大模型生成的输出内容"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","tooltip":"将取期望的字段"},{"label":"模型来源","name":"payload__model_source","type":"select","allowClear":false,"options":[{"value":"online_model","label":"在线模型"},{"value":"inference_service","label":"平台推理服务"}],"required":true,"defaultValue":"online_model","watch":[{"conditions":[{"key":"payload__model_source","value":["online_model","inference_service"],"operator":"include"}],"actions":[{"key":"payload__source"},{"key":"payload__base_model_selected_keys"},{"key":"payload__inference_service"},{"key":"payload__inference_service_selected_keys"},{"key":"payload__jobid"},{"key":"payload__token"},{"key":"payload__stream","value":false},{"key":"payload__prompt"},{"key":"payload__prompt_template"},{"key":"payload__use_history","value":false}],"children":[{"conditions":[{"key":"payload__model_source","value":"online_model"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"","type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true},{},{},{}]}]},{"conditions":[{"key":"payload__model_source","value":"inference_service"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"推理服务","name":"payload__inference_service","type":"inference_service_select","required":true,"tooltip":"选择推理服务","_check_names":[],"itemProps":{"model_type":"localLLM","model_kind":"localLLM","model_show_type":"localLLM"}},{},{},{}]}]}]}]},{"type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true},{"name":"payload__prompt","type":"prompt_editor","required":false,"defaultValue":[{"role":"system","content":"你是一个专业、智能、有用的AI助手。请根据用户的问题提供准确、有帮助的回答。如果你不知道某个问题的答案，请诚实地说出来，而不要编造信息。你的回答应该是清晰、简洁且结构良好的。"},{"role":"user","content":"我需要你帮我解答关于{query}的问题。请提供详细且准确的信息，如果有需要，可以列出步骤或者相关例子来说明。"}],"itemProps":{"format":"dict"}},{"label":"示例对话","name":"payload__example_dialogs","type":"example_dialog","required":false,"defaultValue":[]},{"label":"流式输出","name":"payload__stream","type":"boolean","required":true,"defaultValue":false,"tooltip":"流式输出模型结果"},{"label":"支持上下文对话","name":"payload__use_history","type":"boolean","defaultValue":false,"required":true,"tooltip":"模型能够收到前轮对话内容以丰富背景信息输入"}],"config__input_shape":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}],"config__output_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"name":"online-llm","classification":"basic-model","payload__kind":"OnlineLLM","title_en":"LLM","config__can_run_by_single":true,"about":"大模型，可以进行推理","payload__model_source":"online_model","payload__prompt":{"system":"你是一个专业、精准且具语言风格适应能力的翻译助手。你的职责是将用户提供的文本翻译为英语，确保：\n1. 语言准确、自然，符合目标语言的语法与表达习惯；\n2. 根据用户要求保留或调整术语、风格、语气（如正式、学术、口语化、创意等）；\n3. 在翻译过程中不添加、删减或歪曲原意；\n4. 对专业术语或含糊不清内容可提供注释或建议；\n5. 如遇到文化差异较大表达，请给出等效自然表达方式并可提供简要说明；\n6. 不要编造不确定内容；如翻译信息不足，应向用户提问确认。\n\n你的回答应结构清晰，直接输出翻译后的内容。\n","user":"我需要你帮我翻译以下内容，请根据我填写的信息完成对应的英文翻译：\n\n原文内容：\n{query}"},"payload__example_dialogs":[],"payload__stream":false,"payload__use_history":false,"selected":false,"payload__source":"Qwen","payload__base_url":"","payload__source_id":"6","payload__base_model_selected_keys":["qwen2.5-32b-instruct"],"payload__base_model":"qwen2.5-32b-instruct","payload__can_finetune":false,"payload__model_id":6,"payload__model_generate_control":{"payload__temperature":0.8,"payload__top_p":0.7,"payload__max_tokens":4096},"payload__base_model_id":6},"position":{"x":722.3437401274392,"y":240.98780499677002},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":722.3437401274392,"y":240.98780499677002},"width":195,"height":92,"selected":false},{"id":"1752649741691","type":"custom","data":{"type":"universe","title":"query改写","desc":"调用大模型，使用变量和提示词生成回复","config__input_ports":[{"id":"target","param_source_shape":[{"id":"e34bb08849234cc49f09d37f08525c51","variable_name":"output_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","sourceNodeTitle":"条件分支聚合器-1"}],"param_check_success":true,"param_input_error":[],"param_input_success":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":"","min":1,"max":10,"tooltip":"输入需要添加到提示词的信息，这些信息可以被下方的提示词引用","configurable":true},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","min":1,"max":1,"tooltip":"大模型生成的输出内容"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","tooltip":"将取期望的字段"},{"label":"模型来源","name":"payload__model_source","type":"select","allowClear":false,"options":[{"value":"online_model","label":"在线模型"},{"value":"inference_service","label":"平台推理服务"}],"required":true,"defaultValue":"online_model","watch":[{"conditions":[{"key":"payload__model_source","value":["online_model","inference_service"],"operator":"include"}],"actions":[{"key":"payload__source"},{"key":"payload__base_model_selected_keys"},{"key":"payload__inference_service"},{"key":"payload__inference_service_selected_keys"},{"key":"payload__jobid"},{"key":"payload__token"},{"key":"payload__stream","value":false},{"key":"payload__prompt"},{"key":"payload__prompt_template"},{"key":"payload__use_history","value":false}],"children":[{"conditions":[{"key":"payload__model_source","value":"online_model"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"","type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true},{},{},{}]}]},{"conditions":[{"key":"payload__model_source","value":"inference_service"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"推理服务","name":"payload__inference_service","type":"inference_service_select","required":true,"tooltip":"选择推理服务","_check_names":[],"itemProps":{"model_type":"localLLM","model_kind":"localLLM","model_show_type":"localLLM"}},{},{},{}]}]}]}]},{"type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true},{"name":"payload__prompt","type":"prompt_editor","required":false,"defaultValue":[{"role":"system","content":"你是一个专业、智能、有用的AI助手。请根据用户的问题提供准确、有帮助的回答。如果你不知道某个问题的答案，请诚实地说出来，而不要编造信息。你的回答应该是清晰、简洁且结构良好的。"},{"role":"user","content":"我需要你帮我解答关于{query}的问题。请提供详细且准确的信息，如果有需要，可以列出步骤或者相关例子来说明。"}],"itemProps":{"format":"dict"}},{"label":"示例对话","name":"payload__example_dialogs","type":"example_dialog","required":false,"defaultValue":[]},{"label":"流式输出","name":"payload__stream","type":"boolean","required":true,"defaultValue":false,"tooltip":"流式输出模型结果"},{"label":"支持上下文对话","name":"payload__use_history","type":"boolean","defaultValue":false,"required":true,"tooltip":"模型能够收到前轮对话内容以丰富背景信息输入"}],"config__input_shape":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}],"config__output_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"name":"online-llm","classification":"basic-model","payload__kind":"OnlineLLM","title_en":"LLM","config__can_run_by_single":true,"about":"大模型，可以进行推理","payload__model_source":"online_model","payload__prompt":{"system":"你是一个专业的“智绘创作师”，擅长将用户的文字描述转化为高质量的图像提示词。你能够理解用户的意图、场景设定、风格需求，并据此生成高质量图像提示词，用于驱动图像生成模型。你支持的风格包括但不限于：动漫、写实、油画、像素风、赛博朋克、国风、水墨风等。\n\n当用户提供一个图像创作需求时，请从以下几个维度来扩展或优化提示词：\n1. **主体与场景**：明确图像中要呈现的主体（人物、动物、风景等）和背景场景（城市、森林、未来世界等）；\n2. **细节与动作**：强调主体的动作、姿态、表情、配件等；\n3. **风格与光影**：明确希望的画风类型（如动漫、油画）、色彩风格、光照方向、氛围感；\n4. **镜头语言与构图**：如果用户未指定，可建议角度（如近景/远景/仰视/俯视）、构图方式；\n5. **避免项**：列出需要排除或规避的图像特征（如模糊、畸形、多指等）；\n\n你的输出应该清晰、结构合理，并适合直接用于图像生成模型的输入提示词。请勿虚构不存在的图像内容。如果信息不足，可以适当提问补充用户意图。\n","user":"我需要你帮我生成一个图像提示词。请根据我的输入内容，补全场景、风格和细节，并确保输出可以直接用于图像生成模型。如果需要，你也可以添加一些建议的构图方式和风格细节。务必注意的是只输出你改写后的提示词内容，其他无关内容和对应的解释描述性信息一概不要。\n\n我的描述是：{query}\n"},"payload__example_dialogs":[],"payload__stream":false,"payload__use_history":false,"selected":false,"payload__source":"Qwen","payload__base_url":"","payload__source_id":"6","payload__base_model_selected_keys":["qwen2.5-32b-instruct"],"payload__base_model":"qwen2.5-32b-instruct","payload__can_finetune":false,"payload__model_id":6,"payload__model_generate_control":{"payload__temperature":0.8,"payload__top_p":0.7,"payload__max_tokens":4096},"payload__base_model_id":6},"position":{"x":628.5234966941763,"y":52.44610817634859},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":628.5234966941763,"y":52.44610817634859},"width":195,"height":92,"selected":false},{"id":"1754554108871","type":"custom","data":{"type":"universe","title":"语音转文字-1","desc":"本地的语音转文字模型，可以将语音转换成文字","config__input_ports":[{"id":"target","param_source_shape":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false,"sourceNodeTitle":"条件分支-1"}],"param_check_success":true,"param_input_error":[{"id":"speech","variable_name":"speech","variable_type":"file","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["file","str"],"variable_file_type":"audio","error_type":"type_mismatch","source_info":{"node_title":"代码块-1-2","variable_name":"query","variable_type":"str"}}],"param_input_success":[{"id":"speech","variable_name":"speech","variable_type":"file","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["file","str"],"variable_file_type":"audio"}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":"","min":1,"max":1},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","min":1,"max":1},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","tooltip":"将取期望的字段"},{"label":"模型来源","name":"payload__model_source","type":"select","allowClear":false,"options":[{"value":"online_model","label":"在线模型"},{"value":"inference_service","label":"平台推理服务"}],"required":true,"defaultValue":"inference_service","watch":[{"conditions":[{"key":"payload__model_source","value":["online_model","inference_service"],"operator":"include"}],"actions":[{"key":"payload__source"},{"key":"payload__base_model_selected_keys"},{"key":"payload__inference_service"},{"key":"payload__inference_service_selected_keys"},{"key":"payload__jobid"},{"key":"payload__token"},{"key":"payload__stream","value":false},{"key":"payload__prompt"},{"key":"payload__prompt_template"},{"key":"payload__use_history","value":false}],"children":[{"conditions":[{"key":"payload__model_source","value":"online_model"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"","type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true,"model_kind":"STT"},{},{},{}]}]},{"conditions":[{"key":"payload__model_source","value":"inference_service"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"推理服务","name":"payload__inference_service","type":"inference_service_select","required":true,"tooltip":"选择推理服务","_check_names":[],"itemProps":{"model_type":"localLLM","model_kind":"STT"}},{},{},{}]}]}]}]},{"label":"","name":"payload__inference_service","type":"online_model_select","required":true,"tooltip":"选择推理服务","_check_names":["payload__source","payload__base_model_selected_keys"],"itemProps":{"model_type":"localLLM","model_kind":"STT"},"model_kind":"STT"},{},{},{}],"config__input_shape":[{"id":"speech","variable_name":"speech","variable_type":"file","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["file","str"],"variable_file_type":"audio"}],"config__output_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"name":"stt","classification":"basic-model","payload__kind":"STT","config__can_run_by_single":true,"title_en":"SpeechToText","about":"本地的语音转文字模型（STT），可以在本地进行部署和推理","payload__model_source":"online_model","selected":false,"payload__stream":false,"payload__use_history":false,"payload__source":"GLM","payload__base_url":"","payload__source_id":"36","payload__base_model_selected_keys":["glm-asr"],"payload__base_model":"glm-asr","payload__can_finetune":false,"payload__model_id":36,"payload__model_generate_control":{"payload__temperature":0.8,"payload__top_p":0.7,"payload__max_tokens":4096},"payload__base_model_id":36},"position":{"x":367.80924167245195,"y":13.63774307339932},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":367.80924167245195,"y":13.63774307339932},"width":195,"height":104,"selected":false},{"id":"1754554400040","type":"custom","data":{"type":"if-else","title":"条件分支-1","desc":"根据分支条件，判断执行哪个任务","linkNodeId":"1754554400040_link","payload__kind":"Ifs","config__can_run_by_single":false,"config__input_ports":[{"id":"target","param_source_shape":[{"id":"x","variable_name":"x","variable_type":"str","variable_mode":"mode-line","sourceNodeTitle":"代码块-1"}],"param_check_success":true,"param_input_error":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false,"error_type":"count_less"}],"param_input_success":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false}]}],"config__output_ports":[{"id":"true","label":"IF ","logical_operator":"and","cond":"def is_audio_file(input):\r\n    import json\r\n\r\n    if input.startswith(\"<lazyllm-query>\"):\r\n        input_new = input.strip(\"<lazyllm-query>\")\r\n        input_dict = json.loads(input_new)\r\n        input_dict[\"query\"] = \"\"\r\n\r\n        audio_extensions = {\r\n                '.mp3', '.wav', '.flac', '.ogg', '.aac', '.m4a', '.wma',\r\n                '.aiff', '.aif', '.amr', '.opus', '.mp2', '.m4p', '.mid',\r\n                '.midi', '.wv', '.ape', '.ac3', '.dts', '.ra', '.rm',\r\n                '.vox', '.8svx', '.cda', '.au', '.snd', '.pcm', '.raw'\r\n            }\r\n\r\n        filepath = input_dict[\"files\"][0]\r\n        if '.' in filepath:\r\n            extension = filepath.split('.')[-1].lower()\r\n            if '.' + extension in audio_extensions:\r\n                return \"<lazyllm-query>\" + json.dumps(input_dict)","chosen":false,"selected":false},{"id":"false","label":"ELSE"}],"config__input_shape":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false}],"config__output_shape":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":["InputShape_OutputShape_IfsFull"]},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","readOnly":true},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","tooltip":"输入参数的数量，需保证与输入参数数量保持一致"},{"type":"if_else","name":"payload__if_else","required":true}],"code_language":"python3","payload__judge_on_full_input":true,"name":"ifs","title_en":"IFS","about":"根据分支条件，判断执行哪个任务。类似switch，但条件判断只有为true/false","classification":"control-flow","payload__patent_id":"72a42f78-2246-4816-a7f2-9f22974dbeba","selected":false},"position":{"x":147.87455323225072,"y":170.86896968869917},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":147.87455323225072,"y":170.86896968869917},"width":195,"height":140,"selected":false},{"id":"1754554400040_link","type":"custom","data":{"type":"universe","title":"条件分支聚合器-1","desc":"聚合条件分支的结果","config__input_ports":[{"id":"9525f7f5-8b03-4be2-8edb-a84c5bd6d114","param_source_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","sourceNodeTitle":"语音转文字-1"}],"param_check_success":true,"param_input_error":[{"id":"input","variable_mode":"mode-line","error_type":"count_more"}],"param_input_success":[{"id":"c5910bbad7fe4d08896cdeffee53b72c","variable_name":"input_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}]},{"id":"44fc0ae8-b277-409d-93b1-abdf2e1975c7","param_source_shape":[{"id":"input_1","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false,"sourceNodeTitle":"条件分支-1"}],"param_check_success":true,"param_input_error":[{"id":"1badaa0d110242589341bf613655d33b","variable_name":"input_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","error_type":"count_more"}],"param_input_success":[{"id":"c5910bbad7fe4d08896cdeffee53b72c","variable_name":"input_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":["InputShape_OutputShape_ModeSame"],"readOnly":true},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","readOnly":true},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","max":9999,"tooltip":"将取期望的字段"}],"config__input_shape":[{"id":"c5910bbad7fe4d08896cdeffee53b72c","variable_name":"input_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"config__output_shape":[{"id":"858c57a123e44ea0b333ef29e76691e3","variable_name":"output_0","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"name":"aggregator","classification":"fundamental-component","payload__kind":"aggregator","title_en":"Branch Aggregator","payload__setmode":"mode-same","createWithIntention":true,"selected":false},"position":{"x":488.58495454902595,"y":294.503802837462},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":488.58495454902595,"y":294.503802837462},"width":195,"height":88,"selected":false},{"id":"1754559236967","type":"custom","data":{"type":"code","title":"代码块-1","desc":"编写代码，处理输入变量来生成返回值","variables":[],"code_language":"python3","code":"","outputs":{"key0":{"type":"string","children":null},"key1":{"type":"array","children":null},"key2":{"type":"object","children":null}},"payload__code":"def main(input):\n    return input","payload__code_language":"python3","payload__kind":"Code","config__input_shape":[{"id":"c509f52f-1f8e-444f-8614-c05782c0c358","variable_mode":"mode-line","variable_name":"query","variable_type":"str","payload__batch_flag":false},{"id":"f41130ef-6f9f-4291-b7e2-d4ab288ac380","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false}],"config__output_shape":[{"id":"x","variable_name":"x","variable_type":"str","variable_mode":"mode-line"}],"config__input_ports":[{"id":"target","param_source_shape":[{"id":"a90be6c5-58ba-4acc-b4b1-3fbe8d7422f4","variable_mode":"mode-line","variable_name":"query","variable_type":"str","payload__batch_flag":false,"sourceNodeTitle":"开始"},{"id":"756729a7-73c7-4c2b-a39f-edb89b026a33","variable_mode":"mode-line","variable_name":"input","variable_type":"file","variable_file_type":"default","sourceNodeTitle":"开始"}],"param_check_success":true,"param_input_error":[{"id":"f41130ef-6f9f-4291-b7e2-d4ab288ac380","variable_mode":"mode-line","variable_name":"input","error_type":"type_mismatch","source_info":{"node_title":"开始","variable_name":"input","variable_type":"file"}}],"param_input_success":[{"id":"c509f52f-1f8e-444f-8614-c05782c0c358","variable_mode":"mode-line","variable_name":"query","variable_type":"str","payload__batch_flag":false},{"id":"f41130ef-6f9f-4291-b7e2-d4ab288ac380","variable_mode":"mode-line","variable_name":"input","variable_type":"any","payload__batch_flag":false}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","tooltip":"输入需要添加到代码的变量，代码中可以直接引用此处添加的变量","variable_type_options":["str","int","float","bool","dict","list","any"]},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","tooltip":"代码运行完成后输出的变量，须保证此处的变量名、变量类型与代码的return中完全一致"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","tooltip":"输入参数的数量，需保证与输入参数数量保持一致"},{"name":"payload__code","type":"code","label":"Code","code_language_options":[{"label":"python","value":"python3"}],"required":true,"ai_hidden":false}],"name":"code","title_en":"Code","about":"自定义函数和测试输入，并在后台提供一个沙箱协助用户执行代码。沙箱中需要管控好用户的权限，拒绝用户做删除系统文件等危险操作。目前仅支持python。","classification":"fundamental-component","selected":false},"position":{"x":-93.0938157439044,"y":97.54438800846683},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":-93.0938157439044,"y":97.54438800846683},"width":195,"height":92,"selected":false}],"edges":[{"id":"751377a1-1c63-4366-a715-d8352777cfb2","source":"1752130938475","target":"__end__","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"universe","targetType":"end"},"selected":false},{"id":"29798f33-a477-4e1d-9cc1-2704b0398159","source":"1752649741691","target":"1752649692190","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"universe","targetType":"universe"},"selected":false},{"id":"07110f9c-6a38-4a77-86a5-99e583bf5eea","source":"1752649692190","target":"1752130938475","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"universe","targetType":"universe"},"selected":false},{"id":"1754554400040-1754554400040_link-dash","source":"1754554400040","sourceHandle":"false","targetHandle":"","target":"1754554400040_link","type":"dash-edge","data":{"sourceType":"if-else","targetType":"universe"},"selected":false},{"id":"63c7412d-b040-4717-a8d5-a4f572a8000b","source":"1754554108871","target":"1754554400040_link","sourceHandle":"source","targetHandle":"9525f7f5-8b03-4be2-8edb-a84c5bd6d114","type":"custom","data":{"sourceType":"universe","targetType":"universe"},"selected":false},{"id":"bb7d8547-accb-41b6-83b8-b0184fbbf0eb","source":"1754554400040_link","target":"1752649741691","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"universe","targetType":"universe"},"selected":false},{"id":"0a933fab-2c06-4f97-9b40-d281fa2df36e","source":"1754554400040","target":"1754554108871","sourceHandle":"true","targetHandle":"target","type":"custom","data":{"sourceType":"if-else","targetType":"universe"},"selected":false},{"id":"6e9acd74-282b-40b9-9fb2-97309b41c576","source":"1754554400040","target":"1754554400040_link","sourceHandle":"false","targetHandle":"44fc0ae8-b277-409d-93b1-abdf2e1975c7","type":"custom","data":{"sourceType":"if-else","targetType":"universe"},"selected":false},{"id":"4c66e5f5-9b27-4624-95cf-d5dcbe3bd131","source":"__start__","target":"1754559236967","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"start","targetType":"code"},"selected":false},{"id":"ca358e9e-65b2-4897-888c-3e4654805ada","source":"1754559236967","target":"1754554400040","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"code","targetType":"if-else"},"selected":false}],"resources":[],"edgeMode":"step","viewport":{"x":263.67863666202857,"y":121.40774115204113,"zoom":0.9311665169209911}}}