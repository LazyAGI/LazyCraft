{"id":"fbb8b03c-a7b6-43cd-a049-5357328a8d80","name":"数据蒸馏智能体","description":"使用指定的大语言模型对 Alpaca 格式的数据进行高质量推理蒸馏，蒸馏推理信息会更新到output字段内。","icon":"","icon_background":null,"categories":[],"tags":["数据处理"],"graph":{"nodes":[{"id":"__start__","type":"custom","data":{"type":"start","title":"开始","desc":"","payload__kind":"__start__","config__output_ports":[{"id":"source"}],"variables":[],"config__input_ports":[],"config__output_shape":[{"id":"371246c6-962a-4c46-9db8-0d010ed7bfd3","variable_mode":"mode-line","variable_name":"input","variable_type":"str","payload__batch_flag":false}],"config__parameters":[{"name":"config__output_shape","type":"config__output_shape","label":"参数","tooltip":"定义LazyLLM工作流需要的输入参数，可以选择多种格式"}],"selected":false},"position":{"x":80,"y":282},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":80,"y":282},"width":194,"height":56,"selected":false},{"id":"__end__","type":"custom","data":{"type":"end","title":"结束","desc":"","payload__kind":"__end__","outputs":[],"config__input_ports":[{"id":"target","param_source_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default","sourceNodeTitle":"大模型-1"}],"param_check_success":true,"param_input_error":[{"id":"fdb79a3a-01f2-412a-a2c2-f44a1b140e3c","variable_mode":"mode-line","variable_name":"output","error_type":"type_mismatch","source_info":{"node_title":"大模型-1","variable_name":"output","variable_type":"str"}}],"param_input_success":[{"id":"fdb79a3a-01f2-412a-a2c2-f44a1b140e3c","variable_mode":"mode-line","variable_name":"output","variable_type":"str","payload__batch_flag":false}]}],"config__output_ports":[],"config__input_shape":[{"id":"fdb79a3a-01f2-412a-a2c2-f44a1b140e3c","variable_mode":"mode-line","variable_name":"output","variable_type":"str","payload__batch_flag":false}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"参数"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","tooltip":"输入参数的数量，需保证与输入参数数量保持一致"}],"selected":false},"position":{"x":850,"y":282},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":850,"y":282},"width":194,"height":56,"selected":false},{"id":"1756861994060","type":"custom","data":{"type":"universe","title":"大模型-1","desc":"调用 LazyLLM 大模型，使用变量和提示词生成回复","config__input_ports":[{"id":"target","param_source_shape":[{"id":"371246c6-962a-4c46-9db8-0d010ed7bfd3","variable_mode":"mode-line","variable_name":"input","variable_type":"str","payload__batch_flag":false,"sourceNodeTitle":"开始"}],"param_check_success":true,"param_input_error":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true,"error_type":"type_mismatch","source_info":{"node_title":"开始","variable_name":"input"}}],"param_input_success":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}]}],"config__output_ports":[{"id":"source"}],"config__parameters":[{"name":"config__input_shape","type":"config__input_shape","label":"输入参数","effects":"","min":1,"max":10,"tooltip":"输入需要添加到提示词的信息，这些信息可以被下方的提示词引用","configurable":true},{"name":"config__output_shape","type":"config__output_shape","label":"输出参数","effects":"","min":1,"max":1,"tooltip":"大模型生成的输出内容"},{"name":"config__input_ports","type":"config__input_ports","label":"输入端点","effects":"","tooltip":"将取期望的字段"},{"label":"模型来源","name":"payload__model_source","type":"select","allowClear":false,"options":[{"value":"online_model","label":"在线模型"},{"value":"inference_service","label":"平台推理服务"}],"required":true,"defaultValue":"online_model","watch":[{"conditions":[{"key":"payload__model_source","value":["online_model","inference_service"],"operator":"include"}],"actions":[{"key":"payload__source"},{"key":"payload__base_model_selected_keys"},{"key":"payload__inference_service"},{"key":"payload__inference_service_selected_keys"},{"key":"payload__jobid"},{"key":"payload__token"},{"key":"payload__stream","value":false},{"key":"payload__use_history","value":false}],"children":[{"conditions":[{"key":"payload__model_source","value":"online_model"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"","type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true,"model_kind":"OnlineLLM"},{},{},{}]}]},{"conditions":[{"key":"payload__model_source","value":"inference_service"}],"actions":[{"key":"config__parameters","extend":true,"value":[{},{},{},{},{"label":"推理服务","name":"payload__inference_service","type":"inference_service_select","required":true,"tooltip":"选择推理服务","_check_names":[],"itemProps":{"model_type":"localLLM","model_kind":"localLLM","model_show_type":"localLLM"}},{},{},{}]}]}]}]},{"type":"online_model_select","_check_names":["payload__source","payload__base_model_selected_keys"],"required":true,"model_kind":"OnlineLLM"},{"name":"payload__prompt","type":"prompt_editor","required":false,"defaultValue":[{"role":"system","content":"你是一个专业、智能、有用的AI助手。请根据用户的问题提供准确、有帮助的回答。如果你不知道某个问题的答案，请诚实地说出来，而不要编造信息。你的回答应该是清晰、简洁且结构良好的。"},{"role":"user","content":"我需要你帮我解答关于{query}的问题。请提供详细且准确的信息，如果有需要，可以列出步骤或者相关例子来说明。"}],"itemProps":{"format":"dict"}},{"label":"示例对话","name":"payload__example_dialogs","type":"example_dialog","required":false,"defaultValue":[]},{"label":"流式输出","name":"payload__stream","type":"boolean","required":true,"defaultValue":false,"tooltip":"流式输出模型结果"},{"label":"支持上下文对话","name":"payload__use_history","type":"boolean","defaultValue":false,"required":true,"tooltip":"模型能够收到前轮对话内容以丰富背景信息输入"}],"config__input_shape":[{"id":"query","variable_name":"query","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":false,"variable_mode_readonly":false,"variable_type_options":["str","dict"],"configurable":true}],"config__output_shape":[{"id":"output","variable_name":"output","variable_type":"str","variable_mode":"mode-line","variable_name_readonly":true,"variable_type_readonly":true,"variable_mode_readonly":false,"variable_type_options":["str"],"variable_file_type":"default"}],"name":"online-llm","classification":"basic-model","payload__kind":"OnlineLLM","title_en":"LLM","config__can_run_by_single":true,"about":"LazyLLM 大模型，可以进行推理和文本生成","payload__model_source":"online_model","payload__prompt":{"system":"你是一个专业的数据蒸馏推理助手，负责对 Alpaca 格式的数据进行高质量推理蒸馏。请严格按照以下规则处理输入数据，确保输出结果准确、详细且逻辑清晰。\n\n【输入格式】\n输入是一段符合 Alpaca 格式的数据，形式为包含以下字段的 JSON 对象：\n\n\"instruction\": 描述任务要求的指令文本\n\"input\": 任务所需的原始文本内容，可以为空\n\"output\": 初始为空或占位符，需你填充推理结果\n\n【处理规则】\n1. 数据校验：如果输入不包含 \"instruction\" 和 \"input\" 字段，请原样返回输入内容；如果仅缺少其中一个字段，也原样返回。\n2. 推理要求：\n   - 仔细阅读\"instruction\"和\"input\"，充分理解任务本质和要求\n   - 进行逐步推理（思维链）时，需展现完整的逻辑过程，包括关键思考节点、判断依据和推理步骤\n   - 推理过程应自然流畅，符合人类思考习惯，避免跳跃式思维\n3. 输出格式：\n   - 在 output 字段中直接填入一个字符串，包含逐步推理过程和最终答案，两者合并为逻辑完整的自然语言\n   - 强制要求：每个输出必须以 \\n 开头，再写推理和答案\n   - 推理过程与最终答案之间应有清晰的过渡，如使用\"因此\"、\"综上\"等词语引导\n4. 任务特殊处理：\n   - 数学类型（涉及计算、方程、数列、代数推理等）：推理中需逐步展开计算步骤，明确每一步的计算过程，最终答案放在最后并可考虑使用加粗等方式突出\n   - 问答类型：推理需展现问题分析、信息提取和答案构建过程\n   - 分类类型：推理需说明分类依据和判断理由\n   - 生成类型：推理需说明生成思路、结构设计和内容组织逻辑\n5. 结构保持：保持原始数据结构不变，仅更新 output 字段\n6. 格式要求：输出必须是一个合法的 JSON 字符串，确保特殊字符正确转义\n7. 长度建议：根据任务复杂度调整输出长度，一般情况下推理过程不应少于3句话，确保推理充分\n\n---\n示例输入：\n{{\n  \"instruction\": \"计算从1到5的平方和。\",\n  \"input\": \"\",\n  \"output\": \"\"\n}}\n\n示例输出：\n{{\n  \"instruction\": \"计算从1到5的平方和。\",\n  \"input\": \"\",\n  \"output\": \"\\n我现在要解决的问题是计算从1到5的平方和。首先，我需要明确平方和的含义，就是将每个数先平方，然后再把这些平方后的结果相加。首先计算1的平方，1乘以1等于1；接下来是2的平方，2乘以2等于4；然后是3的平方，3乘以3等于9；再计算4的平方，4乘以4等于16；最后是5的平方，5乘以5等于25。现在需要把这些结果加起来，1加4等于5，5加9等于14，14加16等于30，30加25等于55。因此，从1到5的平方和是55。\"\n}}\n以下是输入文本：","user":"{query}"},"payload__example_dialogs":[],"payload__stream":false,"payload__use_history":false,"selected":false,"payload__source":"SenseNova","payload__base_url":"","payload__source_id":"1","payload__base_model_selected_keys":["SenseChat-5"],"payload__base_model":"SenseChat-5","payload__model_id":1,"payload__model_generate_control":{"payload__temperature":0.8,"payload__top_p":0.7,"payload__max_tokens":4096},"payload__can_finetune":false,"payload__base_model_id":1},"position":{"x":471.0069274902344,"y":311.99999618530273},"targetPosition":"left","sourcePosition":"right","positionAbsolute":{"x":471.0069274902344,"y":311.99999618530273},"width":194,"height":104,"selected":true}],"edges":[{"id":"f1e8f98f-8d32-4f36-a2ca-767302243e6c","source":"__start__","target":"1756861994060","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"start","targetType":"universe"}},{"id":"7d90d35c-3269-4d1a-b5a2-11f83f25105b","source":"1756861994060","target":"__end__","sourceHandle":"source","targetHandle":"target","type":"custom","data":{"sourceType":"universe","targetType":"end"}}],"resources":[],"edgeMode":"bezier","viewport":{"x":-54,"y":21,"zoom":1}}}